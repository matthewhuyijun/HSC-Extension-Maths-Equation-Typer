<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quick Test - Issue Fix</title>
</head>
<body>
    <h1>Quick Test - \tfrac{1}{k}\ln spacing</h1>
    
    <div id="results"></div>

    <script type="module">
        import { parseLatex } from './js/latex-parser.js';
        import { printAST } from './js/ast-printer.js';

        const latex = "\\int_{v_0^2}^{v^2}\\frac{d(v^2)}{g-kv^2}=\\Big[-\\tfrac{1}{k}\\ln|g-kv^2|\\Big]_{v_0^2}^{v^2}";
        const expected = "∫_(v_0 ^2)^(v^2)▒(d(v^2 ))/(g-kv^2)=[-1/k ln |g-kv^2 |]_(v_0 ^2) ^(v^2)";
        
        const ast = parseLatex(latex);
        const result = printAST(ast);
        const passed = result === expected;
        
        const resultsDiv = document.getElementById('results');
        
        resultsDiv.innerHTML = `
            <div style="padding: 20px; border: 3px solid ${passed ? 'green' : 'red'}; background: ${passed ? '#e8f5e9' : '#ffebee'};">
                <h2>${passed ? '✓ PASSED' : '✗ FAILED'}</h2>
                <p><strong>LaTeX:</strong></p>
                <pre>${latex}</pre>
                <p><strong>Expected:</strong></p>
                <pre>${expected}</pre>
                <p><strong>Got:</strong></p>
                <pre>${result}</pre>
                <p><strong>Match:</strong> ${passed ? 'YES ✓' : 'NO ✗'}</p>
                ${!passed ? `
                    <hr>
                    <p><strong>Difference:</strong></p>
                    <p>Expected length: ${expected.length}</p>
                    <p>Got length: ${result.length}</p>
                    <p>First difference at position: ${[...expected].findIndex((c, i) => c !== result[i])}</p>
                ` : ''}
            </div>
        `;
        
        console.log('LaTeX:', latex);
        console.log('Expected:', expected);
        console.log('Got:', result);
        console.log('Match:', passed);
    </script>
</body>
</html>

