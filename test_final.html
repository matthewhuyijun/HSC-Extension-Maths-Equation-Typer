<!DOCTYPE html>
<html>
<head>
    <title>AST Converter Test</title>
    <meta charset="UTF-8">
</head>
<body>
    <h1>测试AST转换器</h1>
    <div id="results"></div>

    <script>
        // Extract toWordEquation function from index.html by loading it
        const testCases = [
            ['\\sqrt{x}', '√(x)'],
            ['\\sqrt[a]{b}', '√(a&b)'],
            ['\\frac{e^{\\mu x}+x^2}{e^{-\\mu x}-x^2}', '(e^(μ x)+x^(2))/(e^(-μ x)-x^(2))'],
            ['\\sum_{n=1}^3 n', '∑_(n=1)^(3) n'],
            ['\\prod_{n=2}^3 n', '∏_(n=2)^(3) n'],
            ['\\int_{b}^{a} f(x) dx', '∫_b^a 〖f(x)〗 dx'],
            ['\\left.f(x)\\right|_{b}^{a}', '├ f(x)┤|b^a'],
            ['\\operatorname{proj}_{\\underset{\\sim}{A}}\\underset{\\sim}{B}', 'proj_A┬∼   B┬∼'],
            ['\\overrightarrow{AB}', '(AB)⃗'],
            ['\\begin{pmatrix}a\\\\ b\\end{pmatrix}', '(■(a@b))'],
            ['\\begin{pmatrix}a\\\\ b\\\\ c\\end{pmatrix}', '(■(a@b@c))']
        ];

        // Load and test
        fetch('index.html')
            .then(r => r.text())
            .then(html => {
                // Extract the toWordEquation function
                const match = html.match(/function toWordEquation\(latex\) \{[\s\S]*?\n        \}/);
                if (!match) {
                    document.getElementById('results').innerHTML = '<p style="color:red">无法找到toWordEquation函数</p>';
                    return;
                }
                
                // Create function
                eval(match[0]);
                
                // Run tests
                let passed = 0;
                let failed = 0;
                let results = '<h2>测试结果:</h2>';
                
                testCases.forEach(([input, expected], i) => {
                    const result = toWordEquation(input);
                    const success = result === expected;
                    
                    if (success) {
                        results += `<p style="color:green">✓ 测试 ${i + 1} 通过</p>`;
                        passed++;
                    } else {
                        results += `<div style="color:red">✗ 测试 ${i + 1} 失败<br>`;
                        results += `输入: ${input}<br>`;
                        results += `期望: ${expected}<br>`;
                        results += `得到: ${result}</div><br>`;
                        failed++;
                    }
                });
                
                results += `<h3>${passed} 通过, ${failed} 失败 (共 ${testCases.length} 个测试)</h3>`;
                document.getElementById('results').innerHTML = results;
            })
            .catch(e => {
                document.getElementById('results').innerHTML = '<p style="color:red">错误: ' + e.message + '</p>';
            });
    </script>
</body>
</html>

