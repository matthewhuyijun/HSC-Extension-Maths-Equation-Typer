<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>LaTeX to UnicodeMath Test Suite</title>
<style>
    * { box-sizing: border-box; }
    body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        margin: 0;
        padding: 20px;
        background: #f5f5f5;
        line-height: 1.6;
    }
    .container {
        max-width: 1400px;
        margin: 0 auto;
        background: white;
        padding: 30px;
        border-radius: 8px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    h1 {
        margin-top: 0;
        color: #2563eb;
        border-bottom: 3px solid #2563eb;
        padding-bottom: 15px;
    }
    .instructions {
        background: #eff6ff;
        border-left: 4px solid #2563eb;
        padding: 15px;
        margin-bottom: 30px;
        border-radius: 4px;
    }
    .instructions h2 {
        margin-top: 0;
        color: #1e40af;
        font-size: 18px;
    }
    .stats {
        display: flex;
        gap: 20px;
        margin-bottom: 20px;
        flex-wrap: wrap;
    }
    .stat {
        background: #f3f4f6;
        padding: 10px 20px;
        border-radius: 6px;
        font-weight: 600;
    }
    .controls {
        margin-bottom: 20px;
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
    }
    button {
        padding: 10px 20px;
        border: none;
        border-radius: 6px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s;
    }
    .btn-primary {
        background: #2563eb;
        color: white;
    }
    .btn-primary:hover {
        background: #1d4ed8;
    }
    .btn-secondary {
        background: #6b7280;
        color: white;
    }
    .btn-secondary:hover {
        background: #4b5563;
    }
    .test-grid {
        display: grid;
        grid-template-columns: auto 1fr 1fr;
        gap: 1px;
        background: #e5e7eb;
        border: 1px solid #e5e7eb;
        margin-bottom: 20px;
    }
    .test-header {
        background: #1f2937;
        color: white;
        padding: 12px;
        font-weight: 600;
        position: sticky;
        top: 0;
        z-index: 10;
    }
    .test-cell {
        background: white;
        padding: 12px;
        position: relative;
        min-height: 50px;
        display: flex;
        align-items: center;
    }
    .test-cell.num {
        font-weight: 600;
        color: #6b7280;
        justify-content: center;
        min-width: 60px;
    }
    .test-cell.latex {
        font-family: 'Courier New', monospace;
        font-size: 13px;
        color: #059669;
        word-break: break-all;
    }
    .test-cell.unicode {
        font-family: 'Cambria Math', 'Latin Modern Math', 'STIX Two Math', serif;
        font-size: 16px;
        color: #2563eb;
        word-break: break-all;
    }
    .category {
        background: #f3f4f6;
        padding: 10px 12px;
        font-weight: 600;
        color: #1f2937;
        grid-column: 1 / -1;
        border-top: 2px solid #d1d5db;
    }
    .copy-status {
        position: fixed;
        top: 20px;
        right: 20px;
        background: #10b981;
        color: white;
        padding: 15px 25px;
        border-radius: 6px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        display: none;
        z-index: 1000;
        animation: slideIn 0.3s ease;
    }
    @keyframes slideIn {
        from {
            transform: translateY(-100px);
            opacity: 0;
        }
        to {
            transform: translateY(0);
            opacity: 1;
        }
    }
    .error {
        color: #dc2626;
        font-style: italic;
    }
    code {
        background: #f3f4f6;
        padding: 2px 6px;
        border-radius: 3px;
        font-size: 14px;
    }
</style>
</head>
<body>

<div class="container">
    <h1>ðŸ§ª LaTeX to UnicodeMath Test Suite</h1>
    
    <div class="instructions">
        <h2>ðŸ“‹ How to Use:</h2>
        <ol>
            <li><strong>Copy All</strong> - Copies all UnicodeMath formulas to clipboard</li>
            <li><strong>Paste in Word</strong> - Open Word and paste (Ctrl/Cmd+V)</li>
            <li><strong>Check Rendering</strong> - Compare with the LaTeX column to verify correctness</li>
            <li><strong>Report Issues</strong> - Note which formula numbers fail</li>
        </ol>
        <p><strong>Note:</strong> The UnicodeMath updates automatically when you modify the conversion code!</p>
    </div>

    <div class="stats">
        <div class="stat">Total Tests: <span id="total-count">0</span></div>
        <div class="stat">Categories: <span id="category-count">0</span></div>
    </div>

    <div class="controls">
        <button class="btn-primary" onclick="copyAllUnicode()">ðŸ“‹ Copy All UnicodeMath</button>
        <button class="btn-secondary" onclick="copyAllLatex()">ðŸ“„ Copy All LaTeX</button>
        <button class="btn-secondary" onclick="exportToJSON()">ðŸ’¾ Export JSON</button>
    </div>

    <div class="test-grid" id="test-grid">
        <div class="test-header">#</div>
        <div class="test-header">LaTeX Input</div>
        <div class="test-header">UnicodeMath Output</div>
    </div>
</div>

<div class="copy-status" id="copy-status">âœ“ Copied to clipboard!</div>

<script type="module" src="./js/test-bundle.js"></script>

<script>


const testCases = [
    // ====== CATEGORY: Basic Operations ======
    { category: "Basic Operations", latex: "a+b" },
    { category: "Basic Operations", latex: "x-y" },
    { category: "Basic Operations", latex: "a \\times b" },
    { category: "Basic Operations", latex: "a \\cdot b" },
    { category: "Basic Operations", latex: "\\frac{a}{b}" },
    { category: "Basic Operations", latex: "a/b" },
    { category: "Basic Operations", latex: "a^2" },
    { category: "Basic Operations", latex: "x_i" },
    { category: "Basic Operations", latex: "x_{i+1}" },
    { category: "Basic Operations", latex: "x^{n+1}" },
    
    // ====== CATEGORY: Complex Fractions ======
    { category: "Complex Fractions", latex: "\\frac{1}{2}" },
    { category: "Complex Fractions", latex: "\\frac{x+y}{z}" },
    { category: "Complex Fractions", latex: "\\frac{a}{b+c}" },
    { category: "Complex Fractions", latex: "\\frac{\\frac{a}{b}}{c}" },
    { category: "Complex Fractions", latex: "\\frac{a}{\\frac{b}{c}}" },
    { category: "Complex Fractions", latex: "\\frac{x^2+y^2}{z^2}" },
    { category: "Complex Fractions", latex: "\\frac{1}{x^2+1}" },
    { category: "Complex Fractions", latex: "\\frac{\\partial f}{\\partial x}" },
    
    // ====== CATEGORY: Superscripts & Subscripts ======
    { category: "Superscripts & Subscripts", latex: "e^{i\\pi}" },
    { category: "Superscripts & Subscripts", latex: "x^{y^z}" },
    { category: "Superscripts & Subscripts", latex: "a_i^j" },
    { category: "Superscripts & Subscripts", latex: "x_{i,j}" },
    { category: "Superscripts & Subscripts", latex: "2^{2^{2^2}}" },
    { category: "Superscripts & Subscripts", latex: "x^{(n)}" },
    { category: "Superscripts & Subscripts", latex: "a^{-1}" },
    { category: "Superscripts & Subscripts", latex: "10^{-23}" },
    
    // ====== CATEGORY: Roots ======
    { category: "Roots", latex: "\\sqrt{2}" },
    { category: "Roots", latex: "\\sqrt{x^2+y^2}" },
    { category: "Roots", latex: "\\sqrt[3]{8}" },
    { category: "Roots", latex: "\\sqrt[n]{x}" },
    { category: "Roots", latex: "\\sqrt{\\frac{a}{b}}" },
    { category: "Roots", latex: "\\sqrt{1+\\sqrt{2}}" },
    
    // ====== CATEGORY: Trigonometric Functions ======
    { category: "Trigonometric Functions", latex: "\\sin(x)" },
    { category: "Trigonometric Functions", latex: "\\cos^2(x)" },
    { category: "Trigonometric Functions", latex: "\\tan(x)" },
    { category: "Trigonometric Functions", latex: "\\sin^{-1}(x)" },
    { category: "Trigonometric Functions", latex: "\\arcsin(x)" },
    { category: "Trigonometric Functions", latex: "\\sinh(x)" },
    { category: "Trigonometric Functions", latex: "\\cosh(x)" },
    { category: "Trigonometric Functions", latex: "\\tanh(x)" },
    
    // ====== CATEGORY: Logarithms & Exponentials ======
    { category: "Logarithms & Exponentials", latex: "\\log(x)" },
    { category: "Logarithms & Exponentials", latex: "\\ln(x)" },
    { category: "Logarithms & Exponentials", latex: "\\log_2(x)" },
    { category: "Logarithms & Exponentials", latex: "e^x" },
    { category: "Logarithms & Exponentials", latex: "e^{-x^2}" },
    { category: "Logarithms & Exponentials", latex: "\\exp(x)" },
    
    // ====== CATEGORY: Summations ======
    { category: "Summations", latex: "\\sum_{i=1}^{n} i" },
    { category: "Summations", latex: "\\sum_{i=0}^{\\infty} \\frac{1}{2^i}" },
    { category: "Summations", latex: "\\sum_{k=1}^{n} k^2" },
    { category: "Summations", latex: "\\sum x_i" },
    
    // ====== CATEGORY: Products ======
    { category: "Products", latex: "\\prod_{i=1}^{n} i" },
    { category: "Products", latex: "\\prod_{k=1}^{n} (1+x_k)" },
    
    // ====== CATEGORY: Integrals ======
    { category: "Integrals", latex: "\\int x\\,dx" },
    { category: "Integrals", latex: "\\int_0^1 x^2\\,dx" },
    { category: "Integrals", latex: "\\int_{-\\infty}^{\\infty} e^{-x^2}\\,dx" },
    { category: "Integrals", latex: "\\int\\int f(x,y)\\,dx\\,dy" },
    { category: "Integrals", latex: "\\oint_C F\\cdot dr" },
    
    // ====== CATEGORY: Limits ======
    { category: "Limits", latex: "\\lim_{x\\to 0} f(x)" },
    { category: "Limits", latex: "\\lim_{n\\to\\infty} \\frac{1}{n}" },
    { category: "Limits", latex: "\\lim_{x\\to 0^+} \\frac{1}{x}" },
    
    // ====== CATEGORY: Derivatives ======
    { category: "Derivatives", latex: "\\frac{dy}{dx}" },
    { category: "Derivatives", latex: "\\frac{d^2y}{dx^2}" },
    { category: "Derivatives", latex: "\\frac{\\partial f}{\\partial x}" },
    { category: "Derivatives", latex: "\\frac{\\partial^2 f}{\\partial x^2}" },
    { category: "Derivatives", latex: "\\frac{\\partial^2 f}{\\partial x\\partial y}" },
    
    // ====== CATEGORY: Greek Letters ======
    { category: "Greek Letters", latex: "\\alpha + \\beta" },
    { category: "Greek Letters", latex: "\\gamma\\delta\\epsilon" },
    { category: "Greek Letters", latex: "\\theta^2" },
    { category: "Greek Letters", latex: "\\lambda_n" },
    { category: "Greek Letters", latex: "\\mu\\nu\\xi" },
    { category: "Greek Letters", latex: "\\pi\\rho\\sigma" },
    { category: "Greek Letters", latex: "\\phi\\chi\\psi" },
    { category: "Greek Letters", latex: "\\Omega\\Delta\\Gamma" },
    
    // ====== CATEGORY: Matrices ======
    { category: "Matrices", latex: "\\begin{pmatrix} a & b \\\\ c & d \\end{pmatrix}" },
    { category: "Matrices", latex: "\\begin{bmatrix} 1 & 2 \\\\ 3 & 4 \\end{bmatrix}" },
    { category: "Matrices", latex: "\\begin{vmatrix} a & b \\\\ c & d \\end{vmatrix}" },
    { category: "Matrices", latex: "\\begin{pmatrix} 1 & 0 & 0 \\\\ 0 & 1 & 0 \\\\ 0 & 0 & 1 \\end{pmatrix}" },
    
    // ====== CATEGORY: Brackets & Delimiters ======
    { category: "Brackets & Delimiters", latex: "(a+b)" },
    { category: "Brackets & Delimiters", latex: "[a+b]" },
    { category: "Brackets & Delimiters", latex: "\\{a+b\\}" },
    { category: "Brackets & Delimiters", latex: "\\left(\\frac{a}{b}\\right)" },
    { category: "Brackets & Delimiters", latex: "\\left[\\frac{x^2}{2}\\right]_0^1" },
    { category: "Brackets & Delimiters", latex: "\\left\\{x\\mid x>0\\right\\}" },
    { category: "Brackets & Delimiters", latex: "\\langle a,b\\rangle" },
    { category: "Brackets & Delimiters", latex: "\\left|x\\right|" },
    { category: "Brackets & Delimiters", latex: "\\left\\|v\\right\\|" },
    
    // ====== CATEGORY: Special Symbols ======
    { category: "Special Symbols", latex: "\\infty" },
    { category: "Special Symbols", latex: "\\pm" },
    { category: "Special Symbols", latex: "\\mp" },
    { category: "Special Symbols", latex: "\\neq" },
    { category: "Special Symbols", latex: "\\leq" },
    { category: "Special Symbols", latex: "\\geq" },
    { category: "Special Symbols", latex: "\\approx" },
    { category: "Special Symbols", latex: "\\equiv" },
    { category: "Special Symbols", latex: "\\propto" },
    { category: "Special Symbols", latex: "\\in" },
    { category: "Special Symbols", latex: "\\notin" },
    { category: "Special Symbols", latex: "\\subset" },
    { category: "Special Symbols", latex: "\\subseteq" },
    { category: "Special Symbols", latex: "\\cup" },
    { category: "Special Symbols", latex: "\\cap" },
    { category: "Special Symbols", latex: "\\emptyset" },
    { category: "Special Symbols", latex: "\\nabla" },
    { category: "Special Symbols", latex: "\\partial" },
    { category: "Special Symbols", latex: "\\forall" },
    { category: "Special Symbols", latex: "\\exists" },
    
    // ====== CATEGORY: Complex Expressions ======
    { category: "Complex Expressions", latex: "x=\\frac{-b\\pm\\sqrt{b^2-4ac}}{2a}" },
    { category: "Complex Expressions", latex: "e^{i\\theta}=\\cos\\theta+i\\sin\\theta" },
    { category: "Complex Expressions", latex: "\\int_{-\\infty}^{\\infty}e^{-x^2}dx=\\sqrt{\\pi}" },
    { category: "Complex Expressions", latex: "\\sum_{n=1}^{\\infty}\\frac{1}{n^2}=\\frac{\\pi^2}{6}" },
    { category: "Complex Expressions", latex: "\\lim_{n\\to\\infty}\\left(1+\\frac{1}{n}\\right)^n=e" },
    { category: "Complex Expressions", latex: "F(s)=\\int_0^{\\infty}f(t)e^{-st}dt" },
    { category: "Complex Expressions", latex: "\\nabla\\times\\mathbf{E}=-\\frac{\\partial\\mathbf{B}}{\\partial t}" },
    { category: "Complex Expressions", latex: "\\frac{1}{\\sqrt{2\\pi\\sigma^2}}e^{-\\frac{(x-\\mu)^2}{2\\sigma^2}}" },
    { category: "Complex Expressions", latex: "\\det(A)=\\sum_{\\sigma\\in S_n}\\text{sgn}(\\sigma)\\prod_{i=1}^n a_{i,\\sigma(i)}" },
    { category: "Complex Expressions", latex: "\\binom{n}{k}=\\frac{n!}{k!(n-k)!}" },
];

let testNumber = 0;
const grid = document.getElementById('test-grid');
const categories = new Set();

function renderTests() {
    console.log('Rendering tests, toWordEquation available:', typeof window.toWordEquation);
    
    testCases.forEach((test, idx) => {
        // Add category header
        if (idx === 0 || testCases[idx-1].category !== test.category) {
            const categoryRow = document.createElement('div');
            categoryRow.className = 'category';
            categoryRow.textContent = test.category;
            grid.appendChild(categoryRow);
            categories.add(test.category);
        }
        
        testNumber++;
        
        // Number cell
        const numCell = document.createElement('div');
        numCell.className = 'test-cell num';
        numCell.textContent = testNumber;
        grid.appendChild(numCell);
        
        // LaTeX cell
        const latexCell = document.createElement('div');
        latexCell.className = 'test-cell latex';
        latexCell.textContent = test.latex;
        grid.appendChild(latexCell);
        
        // UnicodeMath cell
        const unicodeCell = document.createElement('div');
        unicodeCell.className = 'test-cell unicode';
        try {
            const result = window.toWordEquation ? window.toWordEquation(test.latex) : 'Loading...';
            unicodeCell.textContent = result;
        } catch (e) {
            unicodeCell.innerHTML = `<span class="error">ERROR: ${e.message}</span>`;
        }
        grid.appendChild(unicodeCell);
    });

    document.getElementById('total-count').textContent = testNumber;
    document.getElementById('category-count').textContent = categories.size;
}

// Wait for the converter module to load
window.addEventListener('converterReady', renderTests);

// Also try immediately if already loaded
if (window.toWordEquation) {
    renderTests();
}

function copyAllUnicode() {
    const unicodeCells = document.querySelectorAll('.test-cell.unicode');
    const texts = Array.from(unicodeCells)
        .filter(cell => !cell.querySelector('.error'))
        .map(cell => cell.textContent)
        .join('\n');
    
    navigator.clipboard.writeText(texts).then(() => {
        showCopyStatus();
    });
}

function copyAllLatex() {
    const latexCells = document.querySelectorAll('.test-cell.latex');
    const texts = Array.from(latexCells).map(cell => cell.textContent).join('\n');
    
    navigator.clipboard.writeText(texts).then(() => {
        showCopyStatus();
    });
}

function exportToJSON() {
    const data = testCases.map((test, idx) => {
        try {
            return {
                number: idx + 1,
                category: test.category,
                latex: test.latex,
                unicodeMath: window.toWordEquation(test.latex)
            };
        } catch (e) {
            return {
                number: idx + 1,
                category: test.category,
                latex: test.latex,
                unicodeMath: null,
                error: e.message
            };
        }
    });
    
    const json = JSON.stringify(data, null, 2);
    const blob = new Blob([json], { type: 'application/json' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'test-results.json';
    a.click();
    URL.revokeObjectURL(url);
}

function showCopyStatus() {
    const status = document.getElementById('copy-status');
    status.style.display = 'block';
    setTimeout(() => {
        status.style.display = 'none';
    }, 2000);
}

// Make functions global
window.copyAllUnicode = copyAllUnicode;
window.copyAllLatex = copyAllLatex;
window.exportToJSON = exportToJSON;

console.log('âœ… Test page script loaded. Total test cases:', testCases.length);
</script>

</body>
</html>

